/* 
MZ React Round Slider v1.0.0
https://github.com/mzusin/react-round-slider
MIT License      
Copyright (c) 2023-present, Miriam Zusin          
*/
var ze=Object.defineProperty;var ie=Object.getOwnPropertySymbols;var Ue=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var se=(e,t,n)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,le=(e,t)=>{for(var n in t||(t={}))Ue.call(t,n)&&se(e,n,t[n]);if(ie)for(var n of ie(t))Ge.call(t,n)&&se(e,n,t[n]);return e};import{useEffect as v,useRef as te,useState as p}from"react";var ke=Math.pow,S=(e,t=1/0)=>{if(t===1/0)return e;t<0&&(t=0);let n=ke(10,t);return Math.round(e*n)/n},b=(e,t)=>(e%t+t)%t,Y=(e,t,n,r,o)=>(o-r)*(e-t)/(n-t)+r;var ue=e=>!isNaN(parseFloat(e))&&isFinite(e),W=(e,t,n,r=1/0)=>{let[o,a]=e,[i,s]=t;return[S(o+i*Math.cos(n),r),S(a+s*Math.sin(n),r)]};var ce=(e,t=1/0)=>{let n=e*(180/Math.PI);return S(n,t)},O=(e,t=1/0)=>{let n=e*(Math.PI/180);return S(n,t)};var z=(e,t,n=1/0)=>{let r=Math.abs(b(e,360)-b(t,360));return S(r<=180?r:360-r,n)};var qe=(e,t,n=1/0)=>{let r=[];for(let o=0;o<e.length;o++)r.push(S(e[o]-t[o],n));return r},me=(e,t,n=1/0)=>qe(e,t,n);var he=(e,t,n,r)=>(t=t%Math.PI*2,[e[0]+Math.cos(t)*n,e[1]+Math.sin(t)*r]);var Z=()=>Math.random().toString(36).substring(2)+new Date().getTime().toString(36);var x=(e,t)=>ue(e)?Number(e):t,U=(e,t)=>e==null?t:e,ge=(e,t)=>e==null?t:e;var Q="#efefef",j="#5daed2",I="#333";var fe=(e,t,n)=>n>=e&&n<=t||n+360>=e&&n+360<=t,de=(e,t)=>{let n=x(e,0),r=x(t,359.999);return n=b(n,360),r=b(r,360),n<0&&(n+=360),r<0&&(r+=360),r<n&&(r+=360),n===r&&(r+=359.999),[n,r]};var Me=e=>{if(e.length<=0)return[0,0];let t=-1/0,n=-1/0;for(let r of e){let[o,a]=r.pointerRadii;t=Math.max(t,Math.max(0,o)),n=Math.max(n,Math.max(0,a))}return[t,n]},Se=(e,t,n)=>{if(n&&n.length>0){let a=n.findIndex(u=>u===e),i=n.findIndex(u=>u===t),s=a===-1?0:a,l=i===-1?n.length-1:i;return[s,l]}let r=x(e,0),o=x(t,100);return r>o&&(o=r+100),[r,o]},Ze=(e,t,n,r)=>{if(r&&r.length>0){let a=r.findIndex(i=>i===e);return a===-1?0:a}let o=x(e,t);return o<t&&(o=t),o>n&&(o=n),o},be=(e,t,n,r,o)=>{let a=[],i=e||[];for(let s=0;s<i.length;s++){let l=i[s];if(l.rx<=0||l.ry<=0)continue;let u=Ze(l.value,t,n,r),c=Y(t,n,0,100,u),g={pointerRadii:[x(l.rx,10),x(l.ry,10)],percent:c,id:Z(),index:0,bgColor:l.bgColor||o||I};a.push(g)}if(a.length>1){a.sort((s,l)=>s.percent-l.percent);for(let s=0;s<a.length;s++)a[s].index=s}return!a||a.length<=0?[{pointerRadii:[10,10],percent:0,id:Z(),index:0,bgColor:I}]:a},w=(e,t,n,r,o)=>{let a=Math.abs(n-t),i=e*a/100,s=b(t+i,360),l=O(s);return l=Y(l,0,Math.PI*2,0,Math.PI),{position:he(o,l,r[0],r[1]),angleDegrees:s}},Ee=e=>{if(!e||e.length<2)return null;let t=1/0,n=null,r=-1/0,o=null;for(let a=0;a<e.length;a++){let i=e[a];i.percent<t&&(t=i.percent,n=i),i.percent>r&&(r=i.percent,o=i)}return n===null||o===null?null:[n,o]},Pe=(e,t,n,r,o,a,i,s)=>{let[l,u]=t,{left:c,top:g}=e.getBoundingClientRect(),h=[l-c,u-g],f=me(h,n),[d,P]=r,E=Math.atan2(f[1]/P,f[0]/d);E<0&&(E+=2*Math.PI);let M=ce(E);if(!fe(o,a,M)){let R=z(M,o),L=z(M,a);return R<=L?i:s}let D=Math.abs(a-o);return M*100/D},Qe=e=>e.getAttribute("data-type")==="panel",je=e=>e.getAttribute("data-type")==="panel-fill",Ke=(e,t)=>e.getAttribute("data-type")==="pointer"&&e.getAttribute("data-id")===t||e.querySelector(`[data-type="pointer"][data-index="${t}"]`)!==null,Re=(e,t,n,r,o,a,i)=>{if(t.length<=0)return null;if(t.length===1)return t[0].id;if(i==="drag")return r;if(Qe(e)||je(e)){let s=Math.abs(a-o),l=n*s/100,u=1/0,c=null;for(let g=0;g<t.length;g++){let h=t[g],f=h.percent*s/100,d=z(f,l);d<u&&(u=d,c=h.id)}return c}for(let s=0;s<t.length;s++){let l=t[s];if(Ke(e,l.id))return l.id}return r};var Je=(e,t)=>{let n=e.find(s=>s.id===t);if(!n)return null;let r=b(n.index+1,e.length),o=e.find(s=>s.index===r);if(!o)return null;let a=b(n.index-1,e.length),i=e.find(s=>s.index===a);return[n,o,i]},Ce=(e,t)=>{let n=[...e],r=n[0];return r.percent=t,n[0]=r,n},Ae=(e,t,n)=>{if(!n)return e;let r=e.findIndex(i=>i.id===n);if(r===-1)return e;let o=[...e],a=le({},o[r]);return a.percent=t,o[r]=a,o},Te=(e,t,n,r,o)=>{let[a,i,s]=Je(t,n),l=e-a.percent,u=Math.abs(o-r)/2;if(l!==0&&a.percent!==0&&e!==0){let c=Math.abs(l)>u?l<0:l>=0;c&&i.percent>=a.percent&&(e=Math.min(e,i.percent)),!c&&s.percent<=a.percent&&(e=Math.max(e,s.percent))}return e};var K=(e,t,n)=>{let[r,o]=e,[a,i]=t,s=Math.max(0,a*2-n),l=Math.max(0,i*2-n),u=r*2+n+s,c=o*2+n+l;return[u,c]},J=(e,t,n)=>{let[r,o]=K(e,t,n);return[S(r/2,2),S(o/2,2)]},Ie=(e,t,n,r,o)=>{let a=t,i=a-e<=180?0:1;e>a&&(a+=360);let s=J(n,r,o),l=W(s,n,O(e)),u=W(s,n,O(a));return{start:l,end:u,largeArcFlag:i}};import{forwardRef as et}from"react";import{jsx as nt}from"react/jsx-runtime";var tt=(e,t)=>{let{ellipse:n,strokeWidth:r,svgRadii:o,bgColor:a}=e,{start:i,end:s,largeArcFlag:l}=n;return nt("path",{"data-type":"panel",ref:t,d:`M ${i[0]} ${i[1]} A ${o[0]} ${o[1]} 0 ${l} 1 ${s[0]} ${s[1]}`,stroke:a,strokeWidth:r,fill:"none",shapeRendering:"geometricPrecision",strokeLinecap:"round",cursor:"pointer"})},we=et(tt);import{useEffect as rt,useState as ee}from"react";import{Fragment as at,jsx as De}from"react/jsx-runtime";var ot=e=>{let{pointers:t,ellipse:n,strokeWidth:r,svgCenter:o,svgRadii:a,connectionBgColor:i,startEndAngle:s}=e,{start:l}=n,[u,c]=s,[g,h]=ee(null),[f,d]=ee(null),[P,E]=ee(0);return rt(()=>{if(!t||t.length<=0)return;if(t.length<=1){let k=t[0],{position:q,angleDegrees:X}=w(k.percent,u,c,a,o);h(l),d(q),E(Math.abs(X-u)<=180?0:1);return}let M=Ee(t);if(M===null)return;let C=M[0],D=M[1],{position:R,angleDegrees:L}=w(C.percent,u,c,a,o),{position:H,angleDegrees:G}=w(D.percent,u,c,a,o);h(R),d(H),E(Math.abs(G-L)<=180?0:1)},[c,t,l,u,o,a]),De(at,{children:g!==null&&f!==null&&De("path",{"data-type":"panel-fill",d:`M ${g[0]} ${g[1]} A ${a[0]} ${a[1]} 0 ${P} 1 ${f[0]} ${f[1]}`,stroke:i,strokeWidth:r+1,fill:"none",shapeRendering:"geometricPrecision",strokeLinecap:"round",cursor:"pointer",pointerEvents:"none"})})},Le=ot;import{useEffect as it,useState as st}from"react";import{Fragment as ut,jsx as Ve}from"react/jsx-runtime";var lt=e=>{let{id:t,pointer:n,startEndAngle:r,svgRadii:o,svgCenter:a,pointerBgColor:i}=e,{percent:s,pointerRadii:l}=n,[u,c]=l,[g,h]=r,[f,d]=st(null);return it(()=>{let{position:P}=w(s,g,h,o,a);d(P)},[s,o,a,g,h]),f?Ve("ellipse",{"data-type":"pointer","data-index":n.index,"data-id":t,cx:f[0],cy:f[1],rx:u,ry:c,cursor:"pointer",fill:i}):Ve(ut,{})},_e=lt;import{jsx as ne,jsxs as ft}from"react/jsx-runtime";var an=e=>{let t=te(null),n=te(null),r=te("click"),[o,a]=p(null),[i,s]=p([0,0]),[l,u]=p(0),[c,g]=p([0,0]),[h,f]=p([]),[d,P]=p([0,0]),[E,M]=p([0,0]),[C,D]=p([0,0]),[R,L]=p([0,0]),[H,G]=p({start:[0,0],end:[0,0],largeArcFlag:0}),[k,q]=p(Q),[X,ye]=p(j),[re,Be]=p(I),[Ne,Oe]=p(!1),[V,_]=c,[He,$e]=E,[$,F]=R;v(()=>{q(U(e.bgColor,Q)),ye(U(e.connectionBgColor,j)),Be(U(e.pointerBgColor,I))},[e.bgColor,e.connectionBgColor,e.pointerBgColor]),v(()=>{Oe(ge(e.pointersOverlap,!1))},[e.pointersOverlap]),v(()=>{s([x(e.rx,150),x(e.ry,150)])},[e.rx,e.ry]),v(()=>{u(x(e.strokeWidth,5))},[e.strokeWidth]),v(()=>{g(Se(e.min,e.max,e.data))},[e.min,e.max,e.data]),v(()=>{f(be(e.pointers,V,_,e.data,re))},[e.pointers,e.data,V,_,re]),v(()=>{P(Me(h))},[h]),v(()=>{M(K(i,d,l))},[i,d,l]),v(()=>{D(J(i,d,l))},[i,d,l]),v(()=>{L(de(e.startAngleDegrees,e.endAngleDegrees))},[e.startAngleDegrees,e.endAngleDegrees]),v(()=>{G(Ie($,F,i,d,l))},[$,F,i,d,l]);let A=m=>{if(!t||!t.current)return;let y=m.type.indexOf("mouse")!==-1?m.clientX:m.touches[0].clientX,ae=m.type.indexOf("mouse")!==-1?m.clientY:m.touches[0].clientY,B=Pe(t.current,[y,ae],C,i,$,F,V,_);if(h.length<=1){f(T=>Ce(T,B));return}let N=o;a(T=>(N=Re(m.target,h,B,T,$,F,r.current),N)),N!==null&&f(T=>(Ne||_===V||(B=Te(B,T,N,V,_)),Ae(T,B,N)))},Fe=m=>{let y=m.target;!y||!(y===n.current||y.getAttribute("data-type")==="pointer")||(m.preventDefault&&m.preventDefault(),A(m),window.addEventListener("mousemove",A),window.addEventListener("mouseup",oe),r.current="drag")},oe=m=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",A),r.current="click"};return ft("svg",{"data-type":"bg",xmlns:"http://www.w3.org/2000/svg",ref:t,width:He,height:$e,onMouseDown:Fe,onMouseUp:oe,onTouchMove:A,onTouchStart:A,children:[ne(we,{ref:n,ellipse:H,strokeWidth:l,svgRadii:i,bgColor:k}),ne(Le,{pointers:h,ellipse:H,svgRadii:i,strokeWidth:l,connectionBgColor:X,startEndAngle:R,svgCenter:C}),h.map(m=>ne(_e,{pointer:m,id:m.id,startEndAngle:R,svgRadii:i,svgCenter:C,pointerBgColor:m.bgColor},m.id))]})};export{an as RoundSlider};
//# sourceMappingURL=mz-react-round-slider.esm.js.map
