/* 
MZ React Round Slider v1.0.0
https://github.com/mzusin/react-round-slider
MIT License      
Copyright (c) 2023-present, Miriam Zusin          
*/
var Xe=Object.defineProperty;var ue=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var ce=(e,t,n)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,me=(e,t)=>{for(var n in t||(t={}))We.call(t,n)&&ce(e,n,t[n]);if(ue)for(var n of ue(t))Ze.call(t,n)&&ce(e,n,t[n]);return e};import{useEffect as M,useRef as re,useState as f}from"react";var Qe=Math.pow,P=(e,t=1/0)=>{if(t===1/0)return e;t<0&&(t=0);let n=Qe(10,t);return Math.round(e*n)/n},E=(e,t)=>(e%t+t)%t,W=(e,t,n,r,o)=>(o-r)*(e-t)/(n-t)+r;var he=e=>!isNaN(parseFloat(e))&&isFinite(e),Z=(e,t,n,r=1/0)=>{let[o,i]=e,[a,l]=t;return[P(o+a*Math.cos(n),r),P(i+l*Math.sin(n),r)]};var ge=(e,t=1/0)=>{let n=e*(180/Math.PI);return P(n,t)},O=(e,t=1/0)=>{let n=e*(Math.PI/180);return P(n,t)};var F=(e,t,n=1/0)=>{let r=Math.abs(E(e,360)-E(t,360));return P(r<=180?r:360-r,n)};var je=(e,t,n=1/0)=>{let r=[];for(let o=0;o<e.length;o++)r.push(P(e[o]-t[o],n));return r},de=(e,t,n=1/0)=>je(e,t,n);var fe=(e,t,n,r)=>(t=t%Math.PI*2,[e[0]+Math.cos(t)*n,e[1]+Math.sin(t)*r]);var Q=()=>Math.random().toString(36).substring(2)+new Date().getTime().toString(36);var x=(e,t)=>he(e)?Number(e):t,z=(e,t)=>e==null?t:e,j=(e,t)=>e==null?t:e;var K="#efefef",J="#5daed2",I="#333";var pe={filter:"opacity(0.7) grayscale(100%)"};var xe=(e,t,n)=>n>=e&&n<=t||n+360>=e&&n+360<=t,ve=(e,t)=>{let n=x(e,0),r=x(t,359.999);return n=E(n,360),r=E(r,360),n<0&&(n+=360),r<0&&(r+=360),r<n&&(r+=360),n===r&&(r+=359.999),[n,r]};var Pe=e=>{if(e.length<=0)return[0,0];let t=-1/0,n=-1/0;for(let r of e){let[o,i]=r.pointerRadii;t=Math.max(t,Math.max(0,o)),n=Math.max(n,Math.max(0,i))}return[t,n]},Ee=(e,t,n)=>{if(n&&n.length>0){let i=n.findIndex(u=>u===e),a=n.findIndex(u=>u===t),l=i===-1?0:i,s=a===-1?n.length-1:a;return[l,s]}let r=x(e,0),o=x(t,100);return r>o&&(o=r+100),[r,o]},tt=(e,t,n,r)=>{if(r&&r.length>0){let i=r.findIndex(a=>a===e);return i===-1?0:i}let o=x(e,t);return o<t&&(o=t),o>n&&(o=n),o},Re=(e,t,n,r,o,i)=>{let a=[],l=e||[];for(let s=0;s<l.length;s++){let u=l[s];if(u.rx<=0||u.ry<=0)continue;let c=tt(u.value,t,n,r),d=t===n?0:W(t,n,0,100,c),m={pointerRadii:[x(u.rx,10),x(u.ry,10)],percent:d,id:Q(),index:0,bgColor:u.bgColor||o||I,pointerSVG:i||u.pointerSVG,disabled:u.disabled===!0};a.push(m)}if(a.length>1){a.sort((s,u)=>s.percent-u.percent);for(let s=0;s<a.length;s++)a[s].index=s}return!a||a.length<=0?[{pointerRadii:[10,10],percent:0,id:Q(),index:0,bgColor:I,disabled:!1}]:a},w=(e,t,n,r,o)=>{let i=Math.abs(n-t),a=e*i/100,l=E(t+a,360),s=O(l);return s=W(s,0,Math.PI*2,0,Math.PI),{position:fe(o,s,r[0],r[1]),angleDegrees:l}},Ce=e=>{if(!e||e.length<2)return null;let t=1/0,n=null,r=-1/0,o=null;for(let i=0;i<e.length;i++){let a=e[i];a.percent<t&&(t=a.percent,n=a),a.percent>r&&(r=a.percent,o=a)}return n===null||o===null?null:[n,o]},Te=(e,t,n,r,o,i,a,l)=>{let[s,u]=t,{left:c,top:d}=e.getBoundingClientRect(),m=[s-c,u-d],p=de(m,n),[g,S]=r,b=Math.atan2(p[1]/S,p[0]/g);b<0&&(b+=2*Math.PI);let v=ge(b);if(!xe(o,i,v)){let R=F(v,o),V=F(v,i);return R<=V?a:l}let D=Math.abs(i-o);return v*100/D},nt=e=>e.getAttribute("data-type")==="panel",rt=e=>e.getAttribute("data-type")==="panel-fill",ot=(e,t)=>e.getAttribute("data-type")==="pointer"&&e.getAttribute("data-id")===t||e.querySelector(`[data-type="pointer"][data-index="${t}"]`)!==null,Ae=(e,t,n,r,o,i,a)=>{if(t.length<=0)return null;if(t.length===1)return t[0].id;if(a==="drag")return r;if(nt(e)||rt(e)){let l=Math.abs(i-o),s=n*l/100,u=1/0,c=null;for(let d=0;d<t.length;d++){let m=t[d],p=m.percent*l/100,g=F(p,s);g<u&&(u=g,c=m.id)}return c}for(let l=0;l<t.length;l++){let s=t[l];if(ot(e,s.id))return s.id}return r};var at=(e,t)=>{let n=e.find(l=>l.id===t);if(!n)return null;let r=E(n.index+1,e.length),o=e.find(l=>l.index===r);if(!o)return null;let i=E(n.index-1,e.length),a=e.find(l=>l.index===i);return[n,o,a]},Ie=(e,t)=>{if(e[0].disabled)return e;let n=[...e],r=n[0];return r.percent=t,n[0]=r,n},we=(e,t,n)=>{if(!n)return e;let r=e.findIndex(a=>a.id===n);if(r===-1||e[r].disabled)return e;let o=[...e],i=me({},o[r]);return i.percent=t,o[r]=i,o},De=(e,t,n,r,o)=>{let[i,a,l]=at(t,n),s=e-i.percent,u=Math.abs(o-r)/2;if(s!==0&&i.percent!==0&&e!==0){let c=Math.abs(s)>u?s<0:s>=0;c&&a.percent>=i.percent&&(e=Math.min(e,a.percent)),!c&&l.percent<=i.percent&&(e=Math.max(e,l.percent))}return e};var ee=(e,t,n)=>{let[r,o]=e,[i,a]=t,l=Math.max(0,i*2-n),s=Math.max(0,a*2-n),u=r*2+n+l,c=o*2+n+s;return[u,c]},te=(e,t,n)=>{let[r,o]=ee(e,t,n);return[P(r/2,2),P(o/2,2)]},Ve=(e,t,n,r,o)=>{let i=t,a=i-e<=180?0:1;e>i&&(i+=360);let l=te(n,r,o),s=Z(l,n,O(e)),u=Z(l,n,O(i));return{start:s,end:u,largeArcFlag:a}};import{forwardRef as it}from"react";import{jsx as lt}from"react/jsx-runtime";var st=(e,t)=>{let{ellipse:n,strokeWidth:r,svgRadii:o,bgColor:i}=e,{start:a,end:l,largeArcFlag:s}=n;return lt("path",{"data-type":"panel",ref:t,d:`M ${a[0]} ${a[1]} A ${o[0]} ${o[1]} 0 ${s} 1 ${l[0]} ${l[1]}`,stroke:i,strokeWidth:r,fill:"none",shapeRendering:"geometricPrecision",strokeLinecap:"round",cursor:"pointer"})},ye=it(st);import{useEffect as ut,useState as ne}from"react";import{Fragment as mt,jsx as Le}from"react/jsx-runtime";var ct=e=>{let{pointers:t,ellipse:n,strokeWidth:r,svgCenter:o,svgRadii:i,connectionBgColor:a,startEndAngle:l}=e,{start:s}=n,[u,c]=l,[d,m]=ne(null),[p,g]=ne(null),[S,b]=ne(0);return ut(()=>{if(!t||t.length<=0)return;if(t.length<=1){let Y=t[0],{position:q,angleDegrees:X}=w(Y.percent,u,c,i,o);m(s),g(q),b(Math.abs(X-u)<=180?0:1);return}let v=Ce(t);if(v===null)return;let C=v[0],D=v[1],{position:R,angleDegrees:V}=w(C.percent,u,c,i,o),{position:$,angleDegrees:k}=w(D.percent,u,c,i,o);m(R),g($),b(Math.abs(k-V)<=180?0:1)},[c,t,s,u,o,i]),Le(mt,{children:d!==null&&p!==null&&Le("path",{"data-type":"panel-fill",d:`M ${d[0]} ${d[1]} A ${i[0]} ${i[1]} 0 ${S} 1 ${p[0]} ${p[1]}`,stroke:a,strokeWidth:r+1,fill:"none",shapeRendering:"geometricPrecision",strokeLinecap:"round",cursor:"pointer",pointerEvents:"none"})})},_e=ct;import{useEffect as ht,useState as gt}from"react";import{Fragment as Ne,jsx as U,jsxs as ft}from"react/jsx-runtime";var dt=e=>{let{id:t,pointer:n,startEndAngle:r,svgRadii:o,svgCenter:i,pointerBgColor:a,pointerSVG:l,disabledPointerStyle:s}=e,{percent:u,pointerRadii:c}=n,[d,m]=c,[p,g]=r,[S,b]=gt(null);return ht(()=>{let{position:v}=w(u,p,g,o,i);b(v)},[u,o,i,p,g]),S?ft(Ne,{children:[!l&&U("ellipse",{className:n.disabled?"disabled":void 0,"aria-disabled":n.disabled?!0:void 0,style:(n.disabled,s),"data-type":"pointer","data-index":n.index,"data-id":t,"data-percent":n.percent,cx:S[0],cy:S[1],rx:d,ry:m,cursor:"pointer",fill:a}),l&&U("g",{className:n.disabled?"disabled":void 0,"aria-disabled":n.disabled?!0:void 0,style:(n.disabled,s),"data-type":"pointer","data-index":n.index,"data-id":t,"data-percent":n.percent,cursor:"pointer",transform:`translate(${S[0]-d/2}, ${S[1]-m/2})`,children:U("g",{pointerEvents:"none",children:l})})]}):U(Ne,{})},Be=dt;import{jsx as oe,jsxs as St}from"react/jsx-runtime";var gn=e=>{let t=re(null),n=re(null),r=re("click"),[o,i]=f(null),[a,l]=f([0,0]),[s,u]=f(0),[c,d]=f([0,0]),[m,p]=f([]),[g,S]=f([0,0]),[b,v]=f([0,0]),[C,D]=f([0,0]),[R,V]=f([0,0]),[$,k]=f({start:[0,0],end:[0,0],largeArcFlag:0}),[Y,q]=f(K),[X,Oe]=f(J),[ae,$e]=f(I),[He,Ge]=f(!1),[ie,Fe]=f(!1),[ze,Ue]=f(void 0),[y,L]=c,[ke,Ye]=b,[H,G]=R;M(()=>{q(z(e.bgColor,K)),Oe(z(e.connectionBgColor,J)),$e(z(e.pointerBgColor,I))},[e.bgColor,e.connectionBgColor,e.pointerBgColor]),M(()=>{Ge(j(e.pointersOverlap,!1))},[e.pointersOverlap]),M(()=>{Fe(j(e.disabled,!1)),Ue(e.disabledPointerStyle||pe)},[e.disabled,e.disabledPointerStyle]),M(()=>{l([x(e.rx,150),x(e.ry,150)])},[e.rx,e.ry]),M(()=>{u(x(e.strokeWidth,5))},[e.strokeWidth]),M(()=>{d(Ee(e.min,e.max,e.data))},[e.min,e.max,e.data]),M(()=>{p(Re(e.pointers,y,L,e.data,ae,e.pointerSVG))},[e.pointers,e.data,y,L,ae,e.pointerSVG]),M(()=>{S(Pe(m))},[m]),M(()=>{v(ee(a,g,s))},[a,g,s]),M(()=>{D(te(a,g,s))},[a,g,s]),M(()=>{V(ve(e.startAngleDegrees,e.endAngleDegrees))},[e.startAngleDegrees,e.endAngleDegrees]),M(()=>{k(Ve(H,G,a,g,s))},[H,G,a,g,s]);let T=h=>{if(ie||!t||!t.current)return;let _=h.type.indexOf("mouse")!==-1?h.clientX:h.touches[0].clientX,le=h.type.indexOf("mouse")!==-1?h.clientY:h.touches[0].clientY,N=Te(t.current,[_,le],C,a,H,G,y,L);if(m.length<=1){p(A=>Ie(A,N));return}let B=o;i(A=>(B=Ae(h.target,m,N,A,H,G,r.current),B)),B!==null&&p(A=>(He||L===y||(N=De(N,A,B,y,L)),we(A,N,B)))},qe=h=>{if(ie)return;let _=h.target;!_||!(_===n.current||_.getAttribute("data-type")==="pointer")||(h.preventDefault&&h.preventDefault(),T(h),window.addEventListener("mousemove",T),window.addEventListener("mouseup",se),r.current="drag")},se=h=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",T),r.current="click"};return St("svg",{"data-type":"bg",xmlns:"http://www.w3.org/2000/svg",ref:t,width:ke,height:Ye,onMouseDown:qe,onMouseUp:se,onTouchMove:T,onTouchStart:T,children:[oe(ye,{ref:n,ellipse:$,strokeWidth:s,svgRadii:a,bgColor:Y}),oe(_e,{pointers:m,ellipse:$,svgRadii:a,strokeWidth:s,connectionBgColor:X,startEndAngle:R,svgCenter:C}),m.map(h=>oe(Be,{pointer:h,id:h.id,startEndAngle:R,svgRadii:a,svgCenter:C,pointerBgColor:h.bgColor,pointerSVG:e.pointerSVG||h.pointerSVG,disabledPointerStyle:ze},h.id))]})};export{gn as RoundSlider};
//# sourceMappingURL=mz-react-round-slider.esm.js.map
