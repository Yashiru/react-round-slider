/* 
MZ React Round Slider v1.0.0
https://github.com/mzusin/react-round-slider
MIT License      
Copyright (c) 2023-present, Miriam Zusin          
*/
var ht=Object.defineProperty;var be=Object.getOwnPropertySymbols;var gt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var Ee=(e,t,n)=>t in e?ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t)=>{for(var n in t||(t={}))gt.call(t,n)&&Ee(e,n,t[n]);if(be)for(var n of be(t))ft.call(t,n)&&Ee(e,n,t[n]);return e};import{useEffect as M,useRef as he,useState as h}from"react";var pt=Math.pow,R=(e,t=1/0)=>{if(t===1/0)return e;t<0&&(t=0);let n=pt(10,t);return Math.round(e*n)/n},C=(e,t)=>(e%t+t)%t,te=(e,t,n,r,o)=>(o-r)*(e-t)/(n-t)+r;var q=e=>!isNaN(parseFloat(e))&&isFinite(e),ne=(e,t,n,r=1/0)=>{let[o,i]=e,[a,l]=t;return[R(o+a*Math.cos(n),r),R(i+l*Math.sin(n),r)]};var Pe=(e,t=1/0)=>{let n=e*(180/Math.PI);return R(n,t)},H=(e,t=1/0)=>{let n=e*(Math.PI/180);return R(n,t)};var X=(e,t,n=1/0)=>{let r=Math.abs(C(e,360)-C(t,360));return R(r<=180?r:360-r,n)};var xt=(e,t,n=1/0)=>{let r=[];for(let o=0;o<e.length;o++)r.push(R(e[o]-t[o],n));return r},Re=(e,t,n=1/0)=>xt(e,t,n);var Ce=(e,t,n,r)=>(t=t%Math.PI*2,[e[0]+Math.cos(t)*n,e[1]+Math.sin(t)*r]);var re=()=>Math.random().toString(36).substring(2)+new Date().getTime().toString(36);var v=(e,t)=>q(e)?Number(e):t,W=(e,t)=>e==null?t:e,U=(e,t)=>e==null?t:e;var Te=150,Ae=150,oe=10,ae=10,Ie=5,ie="#efefef",se="#5daed2",_="#333",we=0,De=360-.001,ye=0,le=100,Le=!1,Ve={filter:"opacity(0.7) grayscale(100%)"},_e={outline:"none"},Ne={outline:"none"},ue=2;var Be=(e,t,n)=>n>=e&&n<=t||n+360>=e&&n+360<=t,Oe=(e,t)=>{let n=v(e,we),r=v(t,De);return n=C(n,360),r=C(r,360),n<0&&(n+=360),r<0&&(r+=360),r<n&&(r+=360),n===r&&(r+=359.999),[n,r]};var $e=e=>{if(e.length<=0)return[0,0];let t=-1/0,n=-1/0;for(let r of e){let[o,i]=r.pointerRadii;t=Math.max(t,Math.max(0,o)),n=Math.max(n,Math.max(0,i))}return[t,n]},Fe=(e,t,n)=>{if(n&&n.length>0){let i=n.findIndex(u=>u===e),a=n.findIndex(u=>u===t),l=i===-1?0:i,s=a===-1?n.length-1:a;return[l,s]}let r=v(e,ye),o=v(t,le);return r>o&&(o=r+le),[r,o]},vt=(e,t,n,r)=>{if(r&&r.length>0){let i=r.findIndex(a=>a===e);return i===-1?0:i}let o=v(e,t);return o<t&&(o=t),o>n&&(o=n),o},He=(e,t,n,r,o,i)=>{let a=[],l=e||[];for(let s=0;s<l.length;s++){let u=l[s];if(u.rx<=0||u.ry<=0)continue;let d=vt(u.value,t,n,r),f=t===n?0:te(t,n,0,100,d),m={pointerRadii:[v(u.rx,oe),v(u.ry,ae)],percent:f,id:re(),index:0,bgColor:u.bgColor||o||_,pointerSVG:i||u.pointerSVG,disabled:u.disabled===!0,keyboardDisabled:!1,mousewheelDisabled:!1};a.push(m)}if(a.length>1){a.sort((s,u)=>s.percent-u.percent);for(let s=0;s<a.length;s++)a[s].index=s}return!a||a.length<=0?[{pointerRadii:[oe,ae],percent:0,id:re(),index:0,bgColor:_,disabled:!1,keyboardDisabled:!1,mousewheelDisabled:!1}]:a},N=(e,t,n,r,o)=>{let i=Math.abs(n-t),a=e*i/100,l=C(t+a,360),s=H(l);return s=te(s,0,Math.PI*2,0,Math.PI),{position:Ce(o,s,r[0],r[1]),angleDegrees:l}},Ue=e=>{if(!e||e.length<2)return null;let t=1/0,n=null,r=-1/0,o=null;for(let i=0;i<e.length;i++){let a=e[i];a.percent<t&&(t=a.percent,n=a),a.percent>r&&(r=a.percent,o=a)}return n===null||o===null?null:[n,o]},Ge=(e,t,n,r,o,i,a,l)=>{let[s,u]=t,{left:d,top:f}=e.getBoundingClientRect(),m=[s-d,u-f],p=Re(m,n),[g,E]=r,P=Math.atan2(p[1]/E,p[0]/g);P<0&&(P+=2*Math.PI);let x=Pe(P);if(!Be(o,i,x)){let D=X(x,o),O=X(x,i);return D<=O?a:l}let B=Math.abs(i-o);return x*100/B},G=(e,t)=>!e||!t?-1:e.findIndex(n=>n.id===t),Mt=e=>e.getAttribute("data-type")==="panel",St=e=>e.getAttribute("data-type")==="panel-fill",bt=(e,t)=>e.getAttribute("data-type")==="pointer"&&e.getAttribute("data-id")===t||e.querySelector(`[data-type="pointer"][data-index="${t}"]`)!==null,ke=(e,t,n,r,o,i,a)=>{if(t.length<=0)return null;if(t.length===1)return t[0].id;if(a==="drag")return r;if(Mt(e)||St(e)){let l=Math.abs(i-o),s=n*l/100,u=1/0,d=null;for(let f=0;f<t.length;f++){let m=t[f],p=m.percent*l/100,g=X(p,s);g<u&&(u=g,d=m.id)}return d}for(let l=0;l<t.length;l++){let s=t[l];if(bt(e,s.id))return s.id}return r};var Et=(e,t)=>{let n=e.find(l=>l.id===t);if(!n)return null;let r=C(n.index+1,e.length),o=e.find(l=>l.index===r);if(!o)return null;let i=C(n.index-1,e.length),a=e.find(l=>l.index===i);return[n,o,a]},ze=(e,t)=>{if(e[0].disabled)return e;let n=[...e],r=n[0];return r.percent=t,n[0]=r,n},Ye=(e,t,n)=>{if(!n)return e;let r=e.findIndex(a=>a.id===n);if(r===-1||e[r].disabled)return e;let o=[...e],i=w({},o[r]);return i.percent=t,o[r]=i,o},qe=(e,t,n,r,o)=>{let[i,a,l]=Et(t,n),s=e-i.percent,u=Math.abs(o-r)/2;if(s!==0&&i.percent!==0&&e!==0){let d=Math.abs(s)>u?s<0:s>=0;d&&a.percent>=i.percent&&(e=Math.min(e,a.percent)),!d&&l.percent<=i.percent&&(e=Math.max(e,l.percent))}return e};var ce=(e,t,n)=>{let[r,o]=e,[i,a]=t,l=Math.max(0,i*2-n),s=Math.max(0,a*2-n),u=r*2+n+l,d=o*2+n+s;return[u,d]},me=(e,t,n)=>{let[r,o]=ce(e,t,n);return[R(r/2,2),R(o/2,2)]},Xe=(e,t,n,r,o)=>{let i=t,a=i-e<=180?0:1;e>i&&(i+=360);let l=me(n,r,o),s=ne(l,n,H(e)),u=ne(l,n,H(i));return{start:s,end:u,largeArcFlag:a}};import{forwardRef as Pt}from"react";import{jsx as Ct}from"react/jsx-runtime";var Rt=(e,t)=>{let{ellipse:n,strokeWidth:r,svgRadii:o,bgColor:i}=e,{start:a,end:l,largeArcFlag:s}=n;return Ct("path",{"data-type":"panel",ref:t,d:`M ${a[0]} ${a[1]} A ${o[0]} ${o[1]} 0 ${s} 1 ${l[0]} ${l[1]}`,stroke:i,strokeWidth:r,fill:"none",shapeRendering:"geometricPrecision",strokeLinecap:"round",cursor:"pointer"})},We=Pt(Rt);import{useEffect as Tt,useState as de}from"react";import{Fragment as It,jsx as Ze}from"react/jsx-runtime";var At=e=>{let{pointers:t,ellipse:n,strokeWidth:r,svgCenter:o,svgRadii:i,connectionBgColor:a,startEndAngle:l}=e,{start:s}=n,[u,d]=l,[f,m]=de(null),[p,g]=de(null),[E,P]=de(0);return Tt(()=>{if(!t||t.length<=0)return;if(t.length<=1){let K=t[0],{position:j,angleDegrees:J}=N(K.percent,u,d,i,o);m(s),g(j),P(Math.abs(J-u)<=180?0:1);return}let x=Ue(t);if(x===null)return;let T=x[0],B=x[1],{position:D,angleDegrees:O}=N(T.percent,u,d,i,o),{position:k,angleDegrees:Q}=N(B.percent,u,d,i,o);m(D),g(k),P(Math.abs(Q-O)<=180?0:1)},[d,t,s,u,o,i]),Ze(It,{children:f!==null&&p!==null&&Ze("path",{"data-type":"panel-fill",d:`M ${f[0]} ${f[1]} A ${i[0]} ${i[1]} 0 ${E} 1 ${p[0]} ${p[1]}`,stroke:a,strokeWidth:r+1,fill:"none",shapeRendering:"geometricPrecision",strokeLinecap:"round",cursor:"pointer",pointerEvents:"none"})})},Qe=At;import{useEffect as wt,useState as Dt}from"react";import{Fragment as Ke,jsx as Z,jsxs as Lt}from"react/jsx-runtime";var yt=e=>{let{id:t,pointer:n,startEndAngle:r,svgRadii:o,svgCenter:i,pointerBgColor:a,pointerSVG:l,disabledPointerStyle:s}=e,{percent:u,pointerRadii:d}=n,[f,m]=d,[p,g]=r,[E,P]=Dt(null);wt(()=>{let{position:T}=N(u,p,g,o,i);P(T)},[u,o,i,p,g]);let x=w({},Ne);return n.disabled&&(x=w(w({},x),s)),E?Lt(Ke,{children:[!l&&Z("ellipse",{className:n.disabled?"disabled":void 0,"aria-disabled":n.disabled?!0:void 0,style:x,"data-type":"pointer","data-index":n.index,"data-id":t,"data-percent":n.percent,cx:E[0],cy:E[1],rx:f,ry:m,cursor:"pointer",tabIndex:0,role:"slider",fill:a}),l&&Z("g",{className:n.disabled?"disabled":void 0,"aria-disabled":n.disabled?!0:void 0,style:x,"data-type":"pointer","data-index":n.index,"data-id":t,"data-percent":n.percent,cursor:"pointer",transform:`translate(${E[0]-f/2}, ${E[1]-m/2})`,tabIndex:0,role:"slider",children:Z("g",{pointerEvents:"none",children:l})})]}):Z(Ke,{})},je=yt;import{jsx as ge,jsxs as Vt}from"react/jsx-runtime";var Bn=e=>{let t=he(null),n=he(null),r=he("click"),[o,i]=h(null),[a,l]=h([0,0]),[s,u]=h(0),[d,f]=h([0,0]),[m,p]=h([]),[g,E]=h([0,0]),[P,x]=h([0,0]),[T,B]=h([0,0]),[D,O]=h([0,0]),[k,Q]=h({start:[0,0],end:[0,0],largeArcFlag:0}),[K,j]=h(ie),[J,Je]=h(se),[fe,et]=h(_),[tt,nt]=h(!1),[y,rt]=h(!1),[ot,at]=h(void 0),[pe,it]=h(!1),[st,lt]=h(!1),[_t,ut]=h(ue),[$,F]=d,[ct,mt]=P,[z,Y]=D;M(()=>{j(W(e.bgColor,ie)),Je(W(e.connectionBgColor,se)),et(W(e.pointerBgColor,_))},[e.bgColor,e.connectionBgColor,e.pointerBgColor]),M(()=>{nt(U(e.pointersOverlap,Le))},[e.pointersOverlap]),M(()=>{rt(U(e.disabled,!1)),at(e.disabledPointerStyle||Ve),it(U(e.keyboardDisabled,!1)),lt(U(e.mousewheelDisabled,!1))},[e.disabled,e.disabledPointerStyle,e.keyboardDisabled,e.mousewheelDisabled]),M(()=>{l([v(e.rx,Te),v(e.ry,Ae)])},[e.rx,e.ry]),M(()=>{u(v(e.strokeWidth,Ie))},[e.strokeWidth]),M(()=>{f(Fe(e.min,e.max,e.data))},[e.min,e.max,e.data]),M(()=>{p(He(e.pointers,$,F,e.data,fe,e.pointerSVG))},[e.pointers,e.data,$,F,fe,e.pointerSVG]),M(()=>{E($e(m))},[m]),M(()=>{x(ce(a,g,s))},[a,g,s]),M(()=>{B(me(a,g,s))},[a,g,s]),M(()=>{O(Oe(e.startAngleDegrees,e.endAngleDegrees))},[e.startAngleDegrees,e.endAngleDegrees]),M(()=>{Q(Xe(z,Y,a,g,s))},[z,Y,a,g,s]),M(()=>{ut(v(e.round,ue))},[e.round]);let L=c=>{var Se;if(y||!t||!t.current)return;let S=c.type.indexOf("mouse")!==-1?c.clientX:c.touches[0].clientX,A=c.type.indexOf("mouse")!==-1?c.clientY:c.touches[0].clientY,b=Ge(t.current,[S,A],T,a,z,Y,$,F);if(m.length<=1){i(((Se=m[0])==null?void 0:Se.id)||null),p(V=>ze(V,b));return}let I=o;i(V=>(I=ke(c.target,m,b,V,z,Y,r.current),I)),I!==null&&p(V=>(tt||F===$||(b=qe(b,V,I,$,F)),Ye(V,b,I)))},dt=c=>{if(y)return;let S=c.target;!S||!(S===n.current||S.getAttribute("data-type")==="pointer")||(L(c),window.addEventListener("mousemove",L),window.addEventListener("mouseup",xe),r.current="drag")},xe=c=>{window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",L),r.current="click"},ee=c=>{let S=G(m,o);if(S===-1)return;let A=w({},m[S]),b=A.percent;if(!q(b))return;c?b--:b++,b>100&&(b=100),A.percent=b;let I=[...m];I[S]=A,p(I)},ve=()=>{if(y||pe)return;let c=G(m,o);c===-1||m[c].disabled||ee(!1)},Me=()=>{if(y||pe)return;let c=G(m,o);c===-1||m[c].disabled||ee(!0)};return Vt("svg",{"data-type":"bg",xmlns:"http://www.w3.org/2000/svg",ref:t,width:ct,height:mt,onMouseDown:dt,onMouseUp:xe,onTouchMove:L,onTouchStart:L,onKeyDown:c=>{switch(c.key){case"ArrowLeft":{c.preventDefault(),ve();break}case"ArrowRight":{c.preventDefault(),Me();break}case"ArrowUp":{c.preventDefault(),ve();break}case"ArrowDown":{c.preventDefault(),Me();break}}},className:y?"disabled":void 0,"aria-disabled":y?!0:void 0,tabIndex:0,focusable:!0,onWheel:c=>{if(y||st)return;let S=G(m,o);if(S===-1||m[S].disabled)return;c.stopPropagation();let A=c.deltaY<0;ee(!A)},style:_e,children:[ge(We,{ref:n,ellipse:k,strokeWidth:s,svgRadii:a,bgColor:K}),ge(Qe,{pointers:m,ellipse:k,svgRadii:a,strokeWidth:s,connectionBgColor:J,startEndAngle:D,svgCenter:T}),m.map(c=>ge(je,{pointer:c,id:c.id,startEndAngle:D,svgRadii:a,svgCenter:T,pointerBgColor:c.bgColor,pointerSVG:e.pointerSVG||c.pointerSVG,disabledPointerStyle:ot},c.id))]})};export{Bn as RoundSlider};
//# sourceMappingURL=mz-react-round-slider.esm.js.map
