/* 
MZ React Round Slider v1.0.0
https://github.com/mzusin/react-round-slider
MIT License      
Copyright (c) 2023-present, Miriam Zusin          
*/
var Ye=Object.defineProperty;var he=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var ge=(e,t,n)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fe=(e,t)=>{for(var n in t||(t={}))We.call(t,n)&&ge(e,n,t[n]);if(he)for(var n of he(t))Ze.call(t,n)&&ge(e,n,t[n]);return e};import{useEffect as p,useRef as U,useState as v}from"react";var Qe=Math.pow,b=(e,t=1/0)=>{if(t===1/0)return e;t<0&&(t=0);let n=Qe(10,t);return Math.round(e*n)/n},P=(e,t)=>(e%t+t)%t,Q=(e,t,n,r,o)=>(o-r)*(e-t)/(n-t)+r;var de=e=>!isNaN(parseFloat(e))&&isFinite(e),j=(e,t,n,r=1/0)=>{let[o,s]=e,[i,a]=t;return[b(o+i*Math.cos(n),r),b(s+a*Math.sin(n),r)]};var xe=(e,t=1/0)=>{let n=e*(180/Math.PI);return b(n,t)},N=(e,t=1/0)=>{let n=e*(Math.PI/180);return b(n,t)};var z=(e,t,n=1/0)=>{let r=Math.abs(P(e,360)-P(t,360));return b(r<=180?r:360-r,n)};var je=(e,t,n=1/0)=>{let r=[];for(let o=0;o<e.length;o++)r.push(b(e[o]-t[o],n));return r},pe=(e,t,n=1/0)=>je(e,t,n);var ve=(e,t,n,r)=>(t=t%Math.PI*2,[e[0]+Math.cos(t)*n,e[1]+Math.sin(t)*r]);var K=()=>Math.random().toString(36).substring(2)+new Date().getTime().toString(36);var x=(e,t)=>de(e)?Number(e):t,J=(e,t)=>e==null?t:e,Me=(e,t)=>e==null?t:e;var ee="#efefef",te="#5daed2";var Se=(e,t,n)=>n>=e&&n<=t||n+360>=e&&n+360<=t,be=(e,t)=>{let n=x(e,0),r=x(t,359.999);return n=P(n,360),r=P(r,360),n<0&&(n+=360),r<0&&(r+=360),r<n&&(r+=360),n===r&&(r+=359.999),[n,r]};var Ce=e=>{if(e.length<=0)return[0,0];let t=-1/0,n=-1/0;for(let r of e){let[o,s]=r.pointerRadii;t=Math.max(t,Math.max(0,o)),n=Math.max(n,Math.max(0,s))}return[t,n]},Ae=(e,t,n)=>{if(n&&n.length>0){let s=n.findIndex(l=>l===e),i=n.findIndex(l=>l===t),a=s===-1?0:s,u=i===-1?n.length-1:i;return[a,u]}let r=x(e,0),o=x(t,100);return r>o&&(o=r+100),[r,o]},tt=(e,t,n,r)=>{if(r&&r.length>0){let s=r.findIndex(i=>i===e);return s===-1?0:s}let o=x(e,t);return o<t&&(o=t),o>n&&(o=n),o},Te=(e,t,n,r)=>{let o=[],s=e||[];for(let i=0;i<s.length;i++){let a=s[i];if(a.rx<=0||a.ry<=0)continue;let u=tt(a.value,t,n,r),l=Q(t,n,0,100,u),m={pointerRadii:[x(a.rx,10),x(a.ry,10)],percent:l,id:K(),index:0};o.push(m)}if(o.length>1){o.sort((i,a)=>i.percent-a.percent);for(let i=0;i<o.length;i++)o[i].index=i}return!o||o.length<=0?[{pointerRadii:[10,10],percent:0,id:K(),index:0}]:o},I=(e,t,n,r,o)=>{let s=Math.abs(n-t),i=e*s/100,a=P(t+i,360),u=N(a);return u=Q(u,0,Math.PI*2,0,Math.PI),{position:ve(o,u,r[0],r[1]),angleDegrees:a}},we=e=>{if(!e||e.length<2)return null;let t=1/0,n=null,r=-1/0,o=null;for(let s=0;s<e.length;s++){let i=e[s];i.percent<t&&(t=i.percent,n=i),i.percent>r&&(r=i.percent,o=i)}return n===null||o===null?null:[n,o]},Ie=(e,t,n,r,o,s,i,a)=>{let[u,l]=t,{left:m,top:g}=e.getBoundingClientRect(),f=[u-m,l-g],c=pe(f,n),[d,M]=r,E=Math.atan2(c[1]/M,c[0]/d);E<0&&(E+=2*Math.PI);let S=xe(E);if(!Se(o,s,S)){let D=z(S,o),A=z(S,s);return D<=A?i:a}let C=Math.abs(s-o);return S*100/C},nt=e=>e.getAttribute("data-type")==="panel",rt=e=>e.getAttribute("data-type")==="panel-fill",ot=(e,t)=>e.getAttribute("data-type")==="pointer"&&e.getAttribute("data-id")===t||e.querySelector(`[data-type="pointer"][data-index="${t}"]`)!==null,De=(e,t,n,r,o,s,i)=>{if(t.length<=0)return null;if(t.length===1)return t[0].id;if(i==="drag")return r;if(nt(e)||rt(e)){let a=Math.abs(s-o),u=n*a/100,l=1/0,m=null;for(let g=0;g<t.length;g++){let f=t[g],c=f.percent*a/100,d=z(c,u);d<l&&(l=d,m=f.id)}return m}for(let a=0;a<t.length;a++){let u=t[a];if(ot(e,u.id))return u.id}return r},Ve=(e,t)=>{let n=[...t];if(e===null||n.length<=1)return n;let r=n.findIndex(s=>s.id===e);if(r===-1)return n;let o=n[r];return n.splice(r,1),n.push(o),n},ye=(e,t)=>{let n=e.find(a=>a.id===t);if(!n)return null;let r=P(n.index+1,e.length),o=e.find(a=>a.index===r);if(!o)return null;let s=P(n.index-1,e.length),i=e.find(a=>a.index===s);return[n,o,i]};var ne=(e,t,n)=>{let[r,o]=e,[s,i]=t,a=Math.max(0,s*2-n),u=Math.max(0,i*2-n),l=r*2+n+a,m=o*2+n+u;return[l,m]},re=(e,t,n)=>{let[r,o]=ne(e,t,n);return[b(r/2,2),b(o/2,2)]},Le=(e,t,n,r,o)=>{let s=t,i=s-e<=180?0:1;e>s&&(s+=360);let a=re(n,r,o),u=j(a,n,N(e)),l=j(a,n,N(s));return{start:u,end:l,largeArcFlag:i}};import{forwardRef as at}from"react";import{jsx as it}from"react/jsx-runtime";var st=(e,t)=>{let{ellipse:n,strokeWidth:r,svgRadii:o,bgColor:s}=e,{start:i,end:a,largeArcFlag:u}=n;return it("path",{"data-type":"panel",ref:t,d:`M ${i[0]} ${i[1]} A ${o[0]} ${o[1]} 0 ${u} 1 ${a[0]} ${a[1]}`,stroke:s,strokeWidth:r,fill:"none",shapeRendering:"geometricPrecision",strokeLinecap:"round",cursor:"pointer"})},_e=at(st);import{useEffect as lt,useState as oe}from"react";import{Fragment as ct,jsx as Ne}from"react/jsx-runtime";var ut=e=>{let{pointers:t,ellipse:n,strokeWidth:r,svgCenter:o,svgRadii:s,connectionBgColor:i,startEndAngle:a}=e,{start:u}=n,[l,m]=a,[g,f]=oe(null),[c,d]=oe(null),[M,E]=oe(0);return lt(()=>{if(!t||t.length<=0)return;if(t.length<=1){let k=t[0],{position:q,angleDegrees:X}=I(k.percent,l,m,s,o);f(u),d(q),E(Math.abs(X-l)<=180?0:1);return}let S=we(t);if(S===null)return;let B=S[0],C=S[1],{position:D,angleDegrees:A}=I(B.percent,l,m,s,o),{position:G,angleDegrees:H}=I(C.percent,l,m,s,o);f(D),d(G),E(Math.abs(H-A)<=180?0:1)},[m,t,u,l,o,s]),Ne(ct,{children:g!==null&&c!==null&&Ne("path",{"data-type":"panel-fill",d:`M ${g[0]} ${g[1]} A ${s[0]} ${s[1]} 0 ${M} 1 ${c[0]} ${c[1]}`,stroke:i,strokeWidth:r+1,fill:"none",shapeRendering:"geometricPrecision",strokeLinecap:"round",cursor:"pointer",pointerEvents:"none"})})},Be=ut;import{useEffect as mt,useState as ht}from"react";import{Fragment as ft,jsx as He}from"react/jsx-runtime";var gt=e=>{let{id:t,pointer:n,startEndAngle:r,svgRadii:o,svgCenter:s}=e,{percent:i,pointerRadii:a}=n,[u,l]=a,[m,g]=r,[f,c]=ht(null);return mt(()=>{let{position:d}=I(i,m,g,o,s);c(d)},[i,o,s,m,g]),f?He("ellipse",{"data-type":"pointer","data-index":n.index,"data-id":t,cx:f[0],cy:f[1],rx:u,ry:l,cursor:"pointer",fill:"#000"}):He(ft,{})},$e=gt;import{jsx as ae,jsxs as Mt}from"react/jsx-runtime";var cn=e=>{let t=U(null),n=U(null),r=U(""),o=U("click"),[s,i]=v(null),[a,u]=v([0,0]),[l,m]=v(0),[g,f]=v([0,0]),[c,d]=v([]),[M,E]=v([0,0]),[S,B]=v([0,0]),[C,D]=v([0,0]),[A,G]=v([0,0]),[H,k]=v({start:[0,0],end:[0,0],largeArcFlag:0}),[q,X]=v(ee),[Oe,Fe]=v(te),[ze,Ue]=v(!1),[V,y]=g,[Ge,ke]=S,[$,O]=A;p(()=>{X(J(e.bgColor,ee))},[e.bgColor]),p(()=>{Fe(J(e.connectionBgColor,te))},[e.bgColor,e.connectionBgColor]),p(()=>{Ue(Me(e.pointersOverlap,!1))},[e.pointersOverlap]),p(()=>{u([x(e.rx,150),x(e.ry,150)])},[e.rx,e.ry]),p(()=>{m(x(e.strokeWidth,5))},[e.strokeWidth]),p(()=>{f(Ae(e.min,e.max,e.data))},[e.min,e.max,e.data]),p(()=>{d(Te(e.pointers,V,y,e.data))},[e.pointers,e.data,V,y]),p(()=>{E(Ce(c))},[c]),p(()=>{B(ne(a,M,l))},[a,M,l]),p(()=>{D(re(a,M,l))},[a,M,l]),p(()=>{G(be(e.startAngleDegrees,e.endAngleDegrees))},[e.startAngleDegrees,e.endAngleDegrees]),p(()=>{k(Le($,O,a,M,l))},[$,O,a,M,l]),p(()=>{r.current=s},[s]);let T=h=>{if(!t||!t.current)return;let L=h.type.indexOf("mouse")!==-1?h.clientX:h.touches[0].clientX,ie=h.type.indexOf("mouse")!==-1?h.clientY:h.touches[0].clientY,R=Ie(t.current,[L,ie],C,a,$,O,V,y),_=De(h.target,c,R,r.current,$,O,o.current),Y=Ve(_,c);if(r.current=_,!(ze||c.length<=1||y===V)){let[w,ue,ce]=ye(c,r.current),F=R-w.percent,Xe=Math.abs(y-V)/2;if(F!==0&&w.percent!==0&&R!==0){let me=Math.abs(F)>Xe?F<0:F>=0;me&&ue.percent>=w.percent&&(R=Math.min(R,ue.percent)),!me&&ce.percent<=w.percent&&(R=Math.max(R,ce.percent))}}if(d(Y),i(_),_===null)return;let W=Y.findIndex(w=>w.id===_);if(W===-1)return;let Z=[...Y],le=fe({},Z[W]);le.percent=R,Z[W]=le,d(Z)},qe=h=>{let L=h.target;!L||!(L===n.current||L.getAttribute("data-type")==="pointer")||(h.preventDefault&&h.preventDefault(),T(h),window.addEventListener("mousemove",T),window.addEventListener("mouseup",se),o.current="drag")},se=h=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",T),o.current="click"};return Mt("svg",{"data-type":"bg",xmlns:"http://www.w3.org/2000/svg",ref:t,width:Ge,height:ke,onMouseDown:qe,onMouseUp:se,onTouchMove:T,onTouchStart:T,children:[ae(_e,{ref:n,ellipse:H,strokeWidth:l,svgRadii:a,bgColor:q}),ae(Be,{pointers:c,ellipse:H,svgRadii:a,strokeWidth:l,connectionBgColor:Oe,startEndAngle:A,svgCenter:C}),c.map(h=>ae($e,{pointer:h,id:h.id,startEndAngle:A,svgRadii:a,svgCenter:C},h.id))]})};export{cn as RoundSlider};
//# sourceMappingURL=mz-react-round-slider.esm.js.map
