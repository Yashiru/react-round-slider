/* 
MZ React Round Slider v1.0.0
https://github.com/mzusin/react-round-slider
MIT License      
Copyright (c) 2023-present, Miriam Zusin          
*/
var ye=Object.defineProperty;var te=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var ne=(e,t,n)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,re=(e,t)=>{for(var n in t||(t={}))_e.call(t,n)&&ne(e,n,t[n]);if(te)for(var n of te(t))Ne.call(t,n)&&ne(e,n,t[n]);return e};import{useEffect as S,useRef as j,useState as M}from"react";var Be=Math.pow,C=(e,t=1/0)=>{if(t===1/0)return e;t<0&&(t=0);let n=Be(10,t);return Math.round(e*n)/n},T=(e,t)=>(e%t+t)%t,G=(e,t,n,r,o)=>(o-r)*(e-t)/(n-t)+r;var oe=e=>!isNaN(parseFloat(e))&&isFinite(e),U=(e,t,n,r=1/0)=>{let[o,i]=e,[a,s]=t;return[C(o+a*Math.cos(n),r),C(i+s*Math.sin(n),r)]};var ae=(e,t=1/0)=>{let n=e*(180/Math.PI);return C(n,t)},V=(e,t=1/0)=>{let n=e*(Math.PI/180);return C(n,t)};var y=(e,t,n=1/0)=>{let r=Math.abs(T(e,360)-T(t,360));return C(r<=180?r:360-r,n)};var He=(e,t,n=1/0)=>{let r=[];for(let o=0;o<e.length;o++)r.push(C(e[o]-t[o],n));return r},ie=(e,t,n=1/0)=>He(e,t,n);var se=(e,t,n,r)=>(t=t%Math.PI*2,[e[0]+Math.cos(t)*n,e[1]+Math.sin(t)*r]);var k=()=>Math.random().toString(36).substring(2)+new Date().getTime().toString(36);var v=(e,t)=>oe(e)?Number(e):t,q=(e,t)=>e==null?t:e,le=(e,t)=>e==null?t:e;var X="#efefef",Y="#5daed2";var ue=(e,t,n)=>n>=e&&n<=t||n+360>=e&&n+360<=t,ce=(e,t)=>{let n=v(e,0),r=v(t,359.999);return n=T(n,360),r=T(r,360),n<0&&(n+=360),r<0&&(r+=360),r<n&&(r+=360),n===r&&(r+=359.999),[n,r]};var fe=e=>{if(e.length<=0)return[0,0];let t=-1/0,n=-1/0;for(let r of e){let[o,i]=r.pointerRadii;t=Math.max(t,Math.max(0,o)),n=Math.max(n,Math.max(0,i))}return[t,n]},de=(e,t,n)=>{if(n&&n.length>0){let i=n.findIndex(u=>u===e),a=n.findIndex(u=>u===t),s=i===-1?0:i,l=a===-1?n.length-1:a;return[s,l]}let r=v(e,0),o=v(t,100);return r>o&&(o=r+100),[r,o]},ze=(e,t,n,r)=>{if(r&&r.length>0){let i=r.findIndex(a=>a===e);return i===-1?0:i}let o=v(e,t);return o<t&&(o=t),o>n&&(o=n),o},xe=(e,t,n,r)=>{let o=[],i=e||[];for(let a=0;a<i.length;a++){let s=i[a];if(s.rx<=0||s.ry<=0)continue;let l=ze(s.value,t,n,r),u=G(t,n,0,100,l),c={pointerRadii:[v(s.rx,10),v(s.ry,10)],percent:u,id:k(),index:0};o.push(c)}if(o.length>1){o.sort((a,s)=>a.percent-s.percent);for(let a=0;a<o.length;a++)o[a].index=a}return!o||o.length<=0?[{pointerRadii:[10,10],percent:0,id:k(),index:0}]:o},I=(e,t,n,r,o)=>{let i=Math.abs(n-t),a=e*i/100,s=T(t+a,360),l=V(s);return l=G(l,0,Math.PI*2,0,Math.PI),{position:se(o,l,r[0],r[1]),angleDegrees:s}},pe=e=>{if(!e||e.length<2)return null;let t=1/0,n=null,r=-1/0,o=null;for(let i=0;i<e.length;i++){let a=e[i];a.percent<t&&(t=a.percent,n=a),a.percent>r&&(r=a.percent,o=a)}return n===null||o===null?null:[n,o]},Ge=(e,t,n,r,o,i,a,s)=>{let[l,u]=t,{left:c,top:f}=e.getBoundingClientRect(),h=[l-c,u-f],d=ie(h,n),[m,p]=r,P=Math.atan2(d[1]/p,d[0]/m);P<0&&(P+=2*Math.PI);let x=ae(P);if(!ue(o,i,x)){let E=y(x,o),A=y(x,i);return E<=A?a:s}let R=Math.abs(i-o);return x*100/R},Ue=e=>e.getAttribute("data-type")==="panel",ke=e=>e.getAttribute("data-type")==="panel-fill",qe=(e,t)=>e.getAttribute("data-type")==="pointer"&&e.getAttribute("data-id")===t||e.querySelector(`[data-type="pointer"][data-index="${t}"]`)!==null,Xe=(e,t,n,r,o,i,a)=>{if(t.length<=0)return null;if(t.length===1)return t[0].id;if(a==="drag")return r;if(Ue(e)||ke(e)){let s=Math.abs(i-o),l=n*s/100,u=1/0,c=null;for(let f=0;f<t.length;f++){let h=t[f],d=h.percent*s/100,m=y(d,l);m<u&&(u=m,c=h.id)}return c}for(let s=0;s<t.length;s++){let l=t[s];if(qe(e,l.id))return l.id}return r},Ye=(e,t)=>{let n=[...t];if(e===null||n.length<=1)return n;let r=n.findIndex(i=>i.id===e);if(r===-1)return n;let o=n[r];return n.splice(r,1),n.push(o),n},We=(e,t)=>{let n=e.find(s=>s.id===t);if(!n)return null;let r=T(n.index+1,e.length),o=e.find(s=>s.index===r);if(!o)return null;let i=T(n.index-1,e.length),a=e.find(s=>s.index===i);return[n,o,a]},Ze=(e,t,n,r,o)=>{let[i,a,s]=We(t,n),l=e-i.percent,u=Math.abs(o-r)/2;if(l!==0&&i.percent!==0&&e!==0){let c=Math.abs(l)>u?l<0:l>=0;c&&a.percent>=i.percent&&(e=Math.min(e,a.percent)),!c&&s.percent<=i.percent&&(e=Math.max(e,s.percent))}return e},ve=(e,t,n,r,o,i,a,s,l,u,c,f,h,d)=>{let m=Ge(n,[e,t],o,i,a,s,l,u),p=Xe(r,c,m,f,a,s,h);d||c.length<=1||u===l||(m=Ze(m,c,p,l,u));let x=Ye(p,c);if(p===null)return{updatedPercent:m,activePointerId:p,updatedPointers:x};let b=c.findIndex(A=>A.id===p);if(b===-1)return{updatedPercent:m,activePointerId:p,updatedPointers:x};let R=[...x],E=re({},R[b]);return E.percent=m,R[b]=E,{updatedPercent:m,activePointerId:p,copy:R}};var W=(e,t,n)=>{let[r,o]=e,[i,a]=t,s=Math.max(0,i*2-n),l=Math.max(0,a*2-n),u=r*2+n+s,c=o*2+n+l;return[u,c]},Z=(e,t,n)=>{let[r,o]=W(e,t,n);return[C(r/2,2),C(o/2,2)]},Me=(e,t,n,r,o)=>{let i=t,a=i-e<=180?0:1;e>i&&(i+=360);let s=Z(n,r,o),l=U(s,n,V(e)),u=U(s,n,V(i));return{start:l,end:u,largeArcFlag:a}};import{forwardRef as Qe}from"react";import{jsx as Ke}from"react/jsx-runtime";var je=(e,t)=>{let{ellipse:n,strokeWidth:r,svgRadii:o,bgColor:i}=e,{start:a,end:s,largeArcFlag:l}=n;return Ke("path",{"data-type":"panel",ref:t,d:`M ${a[0]} ${a[1]} A ${o[0]} ${o[1]} 0 ${l} 1 ${s[0]} ${s[1]}`,stroke:i,strokeWidth:r,fill:"none",shapeRendering:"geometricPrecision",strokeLinecap:"round",cursor:"pointer"})},Se=Qe(je);import{useEffect as Je,useState as Q}from"react";import{Fragment as tt,jsx as be}from"react/jsx-runtime";var et=e=>{let{pointers:t,ellipse:n,strokeWidth:r,svgCenter:o,svgRadii:i,connectionBgColor:a,startEndAngle:s}=e,{start:l}=n,[u,c]=s,[f,h]=Q(null),[d,m]=Q(null),[p,P]=Q(0);return Je(()=>{if(!t||t.length<=0)return;if(t.length<=1){let N=t[0],{position:B,angleDegrees:H}=I(N.percent,u,c,i,o);h(l),m(B),P(Math.abs(H-u)<=180?0:1);return}let x=pe(t);if(x===null)return;let b=x[0],R=x[1],{position:E,angleDegrees:A}=I(b.percent,u,c,i,o),{position:L,angleDegrees:_}=I(R.percent,u,c,i,o);h(E),m(L),P(Math.abs(_-A)<=180?0:1)},[c,t,l,u,o,i]),be(tt,{children:f!==null&&d!==null&&be("path",{"data-type":"panel-fill",d:`M ${f[0]} ${f[1]} A ${i[0]} ${i[1]} 0 ${p} 1 ${d[0]} ${d[1]}`,stroke:a,strokeWidth:r+1,fill:"none",shapeRendering:"geometricPrecision",strokeLinecap:"round",cursor:"pointer",pointerEvents:"none"})})},Ee=et;import{useEffect as nt,useState as rt}from"react";import{Fragment as at,jsx as Pe}from"react/jsx-runtime";var ot=e=>{let{id:t,pointer:n,startEndAngle:r,svgRadii:o,svgCenter:i}=e,{percent:a,pointerRadii:s}=n,[l,u]=s,[c,f]=r,[h,d]=rt(null);return nt(()=>{let{position:m}=I(a,c,f,o,i);d(m)},[a,o,i,c,f]),h?Pe("ellipse",{"data-type":"pointer","data-index":n.index,"data-id":t,cx:h[0],cy:h[1],rx:l,ry:u,cursor:"pointer",fill:"#000"}):Pe(at,{})},Re=ot;import{jsx as K,jsxs as ct}from"react/jsx-runtime";var en=e=>{let t=j(null),n=j(null),r=j("click"),[o,i]=M(null),[a,s]=M([0,0]),[l,u]=M(0),[c,f]=M([0,0]),[h,d]=M([]),[m,p]=M([0,0]),[P,x]=M([0,0]),[b,R]=M([0,0]),[E,A]=M([0,0]),[L,_]=M({start:[0,0],end:[0,0],largeArcFlag:0}),[N,B]=M(X),[H,Ce]=M(Y),[Te,Ae]=M(!1),[$,O]=c,[we,Ie]=P,[F,z]=E;S(()=>{B(q(e.bgColor,X))},[e.bgColor]),S(()=>{Ce(q(e.connectionBgColor,Y))},[e.bgColor,e.connectionBgColor]),S(()=>{Ae(le(e.pointersOverlap,!1))},[e.pointersOverlap]),S(()=>{s([v(e.rx,150),v(e.ry,150)])},[e.rx,e.ry]),S(()=>{u(v(e.strokeWidth,5))},[e.strokeWidth]),S(()=>{f(de(e.min,e.max,e.data))},[e.min,e.max,e.data]),S(()=>{d(xe(e.pointers,$,O,e.data))},[e.pointers,e.data,$,O]),S(()=>{p(fe(h))},[h]),S(()=>{x(W(a,m,l))},[a,m,l]),S(()=>{R(Z(a,m,l))},[a,m,l]),S(()=>{A(ce(e.startAngleDegrees,e.endAngleDegrees))},[e.startAngleDegrees,e.endAngleDegrees]),S(()=>{_(Me(F,z,a,m,l))},[F,z,a,m,l]);let w=g=>{if(!t||!t.current)return;let D=g.type.indexOf("mouse")!==-1?g.clientX:g.touches[0].clientX,ee=g.type.indexOf("mouse")!==-1?g.clientY:g.touches[0].clientY,{activePointerId:Ve,updatedPointers:Le}=ve(D,ee,t.current,g.target,b,a,F,z,$,O,h,o,r.current,Te);d(Le),i(Ve)},De=g=>{let D=g.target;!D||!(D===n.current||D.getAttribute("data-type")==="pointer")||(g.preventDefault&&g.preventDefault(),w(g),window.addEventListener("mousemove",w),window.addEventListener("mouseup",J),r.current="drag")},J=g=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",w),r.current="click"};return ct("svg",{"data-type":"bg",xmlns:"http://www.w3.org/2000/svg",ref:t,width:we,height:Ie,onMouseDown:De,onMouseUp:J,onTouchMove:w,onTouchStart:w,children:[K(Se,{ref:n,ellipse:L,strokeWidth:l,svgRadii:a,bgColor:N}),K(Ee,{pointers:h,ellipse:L,svgRadii:a,strokeWidth:l,connectionBgColor:H,startEndAngle:E,svgCenter:b}),h.map(g=>K(Re,{pointer:g,id:g.id,startEndAngle:E,svgRadii:a,svgCenter:b},g.id))]})};export{en as RoundSlider};
//# sourceMappingURL=mz-react-round-slider.esm.js.map
